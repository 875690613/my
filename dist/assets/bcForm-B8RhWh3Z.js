import{_ as Y,y as L,r as P,d as c,o as r,a as m,b as l,w as a,g as f,m as k,t as C,i as j,F as Z,h as ee,c as U,s as V,z as te,A as le,N as oe,n as ie,S as ae,k as se,B as ne,C as re,E as ue,G as ce,H as de,I as pe}from"./index-Bc8PoC_0.js";/* empty css              *//* empty css              */const me={class:"container"},be={class:"content"},ve={key:0,style:{background:"#fff"}},fe={class:"result"},ge={key:0},Se={key:1,class:"error"},ye={key:1},_e={key:0,class:"empty"},Ve={key:2},Oe={__name:"bcForm",setup(je){const e=L({initial:{shares:0,price:0,name:"",code:""},positionsList:[],currentPrice:0,localStorageObj:{positionsList:[]}}),b=L([]),s=L({quantity:3e3,price:1.81,currentPrice:0}),u=L({shares:0,price:0,currentPrice:0}),D=()=>{e.initial={shares:0,price:0,name:"",code:""},e.positionsList=[],e.currentPrice=0},d=P(2),A=[{text:"信用分产值计算器",value:0},{text:"股票补仓计算器",value:1},{text:"DCP计算器",value:2}];P([]);const x=P(0),g=P(30),S=()=>{if(s.quantity>0&&s.price>0){const i=s.quantity*.75;console.log("↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ "),console.log("1、划到流动池需扣除25%手续费，获得信用分：",i);const t=(i*s.price*.95).toFixed(4);console.log("2、流动池中信用分数量*市场价后打95折后，5%进入流动池：",t);const _=(t*.95).toFixed(4);console.log("3、兑成成dcp打95折：",_);const p=_*.95;s.currentPrice=p.toFixed(4),console.log("4、dcp兑成后，卖给服务商收取5%服务费，服务商打95折：",p),console.log("↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ "),V(`DCP变现为：${p.toFixed(4)}`)}else V("请填写完整信息")},N=c(()=>g.value===0?"除数不能为零":(x.value/g.value).toFixed(2));localStorage.getItem("localStorageObj")&&(e.localStorageObj=JSON.parse(localStorage.getItem("localStorageObj")),e.localStorageObj.positionsList.length>0&&(e.positionsList=e.localStorageObj.positionsList),e.initial.shares=e.localStorageObj.shares,e.initial.price=e.localStorageObj.price,e.initial.name=e.localStorageObj.name,e.initial.code=e.localStorageObj.code,e.currentPrice=e.localStorageObj.currentPrice);const q=c(()=>u.shares>0&&u.price>0&&e.currentPrice>0&&e.initial.code!=""&&e.initial.name!=""),h=c(()=>e.positionsList.reduce((i,t)=>i+t.shares,e.initial.shares)),J=c(()=>{const i=e.initial.shares*e.initial.price,t=e.positionsList.reduce((_,p)=>_+p.shares*p.price,0);return i+t}),y=c(()=>h.value>0?J.value/h.value:0),z=c(()=>e.currentPrice<=0||y.value<=e.currentPrice?"0.00":((y.value-e.currentPrice)/e.currentPrice*100).toFixed(2)),E=c(()=>e.currentPrice===0?"请输入当前价格查看结果":e.currentPrice>y.value?"💰 当前处于盈利状态":e.currentPrice<y.value?"📉 当前处于亏损状态":"⚖️ 当前处于保本状态"),w=c(()=>({color:e.currentPrice<y.value?"#07c160":"#ee0a24"})),G=c(()=>({fontWeight:"bold",color:w.value.color})),T=()=>{if(!q.value){V("请输入必填项数据");return}e.positionsList.push({shares:Number(u.shares),price:Number(u.price),name:e.initial.name,code:e.initial.code}),u.shares=0,u.price=0,V("添加成功")},H=()=>{if(e.positionsList.length==0){V("请先添加补仓记录");return}if(console.log("state.localStorageObj11111:",e.localStorageObj,"positionsList:",e.positionsList),e.localStorageObj.positionsList.length>0&&e.localStorageObj.positionsList[0].name==e.initial.name?(e.localStorageObj.positionsList=[...e.localStorageObj.positionsList,...e.positionsList],console.log("state.localStorageObj.positionsList",e.localStorageObj.positionsList)):e.localStorageObj.positionsList=e.positionsList,e.localStorageObj.shares=e.initial.shares,e.localStorageObj.price=e.initial.price,e.localStorageObj.name=e.initial.name,e.localStorageObj.code=e.initial.code,e.localStorageObj.currentPrice=e.currentPrice,e.localStorageObj.positionsList=[...new Map(e.localStorageObj.positionsList.map(i=>[JSON.stringify(i),i])).values()],localStorage.setItem("localStorageObj",JSON.stringify(e.localStorageObj)),b.length>0)for(let i=0;i<b.length;i++)b[i].name===e.initial.name?b[i]=e.localStorageObj:b.push(e.localStorageObj);else b.push(e.localStorageObj);localStorage.setItem("localStorageCcList",JSON.stringify(b))},W=i=>{e.positionsList.splice(i,1),V("删除成功"),e.localStorageObj.positionsList=e.positionsList},K=()=>{history.back()};return(i,t)=>{const _=te,p=le,Q=oe,n=ie,B=ae,v=se,F=ne,O=re,I=ue,R=ce,$=pe,X=de;return r(),m("div",me,[l(Q,{title:"计算器",fixed:"","left-arrow":"","left-text":"返回",onClickLeft:K,border:!0},{right:a(()=>[l(p,null,{default:a(()=>[l(_,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),options:A,onChange:t[1]||(t[1]=o=>d.value=o)},null,8,["modelValue"])]),_:1})]),_:1}),f("div",be,[d.value===0?(r(),m("div",ve,[l(v,{inset:"",class:"section"},{default:a(()=>[l(n,{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=o=>x.value=o),modelModifiers:{number:!0},label:"会员卡面额",type:"number",placeholder:"请输入会员卡面额",clearable:""},null,8,["modelValue"]),t[14]||(t[14]=k(" 产出周期(天)：")),l(B,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=o=>g.value=o)},null,8,["modelValue"])]),_:1}),f("div",fe,[g.value!==0?(r(),m("h3",ge," 每天产出："+C(x.value)+" ÷ "+C(g.value)+" = "+C(N.value),1)):(r(),m("h3",Se,C(N.value),1))])])):j("",!0),d.value===1?(r(),m("div",ye,[l(v,{inset:"",class:"section"},{default:a(()=>[t[15]||(t[15]=f("div",{class:"section-title"},"持仓信息",-1)),l(n,{modelValue:e.initial.name,"onUpdate:modelValue":t[4]||(t[4]=o=>e.initial.name=o),modelModifiers:{number:!0},required:"",label:"持仓名称",type:"text",placeholder:"请输入名称",clearable:""},null,8,["modelValue"]),l(n,{modelValue:e.initial.code,"onUpdate:modelValue":t[5]||(t[5]=o=>e.initial.code=o),required:"",label:"持仓代码",type:"text",placeholder:"请输入代码",clearable:""},null,8,["modelValue"])]),_:1}),l(v,{inset:"",class:"section"},{default:a(()=>[t[16]||(t[16]=f("div",{class:"section-title"},"初始持仓",-1)),l(n,{modelValue:e.initial.shares,"onUpdate:modelValue":t[6]||(t[6]=o=>e.initial.shares=o),modelModifiers:{number:!0},label:"持仓数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:""},null,8,["modelValue"]),l(n,{modelValue:e.initial.price,"onUpdate:modelValue":t[7]||(t[7]=o=>e.initial.price=o),modelModifiers:{number:!0},label:"成本价",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"])]),_:1}),l(v,{inset:"",class:"section"},{default:a(()=>[t[18]||(t[18]=f("div",{class:"section-title"},"补仓操作",-1)),l(n,{modelValue:u.shares,"onUpdate:modelValue":t[8]||(t[8]=o=>u.shares=o),modelModifiers:{number:!0},required:"",label:"补仓数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:""},null,8,["modelValue"]),l(n,{modelValue:u.price,"onUpdate:modelValue":t[9]||(t[9]=o=>u.price=o),modelModifiers:{number:!0},required:"",label:"补仓价格",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"]),l(F,{block:"",type:"primary",onClick:T,disabled:!q.value,class:"add-btn"},{default:a(()=>t[17]||(t[17]=[k(" + 添加 ")])),_:1},8,["disabled"])]),_:1}),l(v,{inset:"",class:"section"},{default:a(()=>[t[19]||(t[19]=f("div",{class:"section-title"},"添加记录",-1)),e.positionsList.length===0?(r(),m("div",_e,"暂无补仓记录")):(r(!0),m(Z,{key:1},ee(e.positionsList,(o,M)=>(r(),U(O,{key:M,title:`【${M+1}】 - ${o.shares}股 @ ${o.price}元`,value:`总投入：${(o.shares*o.price).toFixed(2)}元`},{"right-icon":a(()=>[l(F,{size:"small",icon:"delete",onClick:xe=>W(M),style:{"margin-left":"8px"}},null,8,["onClick"])]),_:2},1032,["title","value"]))),128))]),_:1}),l(v,{inset:"",class:"section result-section"},{default:a(()=>[l(n,{modelValue:e.currentPrice,"onUpdate:modelValue":t[10]||(t[10]=o=>e.currentPrice=o),modelModifiers:{number:!0},required:"",label:"当前价格",type:"number",placeholder:"请输入当前价",suffix:"元",clearable:""},null,8,["modelValue"]),l(I,null,{default:a(()=>t[20]||(t[20]=[k("计算结果")])),_:1}),l(O,{title:"总持仓量",value:`${h.value.toFixed(2)} 股`},null,8,["value"]),l(O,{title:"平均成本价","title-style":"red",value:`${y.value.toFixed(2)} 元`},null,8,["value"]),l(O,{title:"需上涨",value:`${z.value}%`,"value-class":w.value},null,8,["value","value-class"]),l(I),l(O,{title:E.value,"title-style":G.value,style:{"margin-bottom":"40px"}},null,8,["title","title-style"])]),_:1})])):j("",!0),d.value===2?(r(),m("div",Ve,[l(v,{inset:"",class:"section"},{default:a(()=>[t[21]||(t[21]=f("div",{class:"section-title"},"DCP计算",-1)),l(n,{modelValue:s.quantity,"onUpdate:modelValue":t[11]||(t[11]=o=>s.quantity=o),modelModifiers:{number:!0},label:"信用分数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:"",onInput:S},null,8,["modelValue"]),l(n,{name:"stepper",label:"市场价"},{input:a(()=>[l(B,{modelValue:s.price,"onUpdate:modelValue":t[12]||(t[12]=o=>s.price=o),step:"0.01","decimal-length":2,label:"市场价",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{modelValue:s.currentPrice,"onUpdate:modelValue":t[13]||(t[13]=o=>s.currentPrice=o),modelModifiers:{number:!0},label:"总价",type:"number",placeholder:"请输入当前价",suffix:"元",clearable:"",onChange:S,onInput:S,onPlus:S,onMinus:S},null,8,["modelValue"])]),_:1}),l(F,{block:"",type:"primary",onClick:S,class:"add-btn"},{default:a(()=>t[22]||(t[22]=[k("计算")])),_:1})])):j("",!0)]),l(X,{class:"action-bar"},{default:a(()=>[l(R,{icon:"chat-o",text:"客服"}),d.value==1?(r(),U($,{key:0,onClick:D,color:"#1989faad",type:"warning",text:"重置"})):j("",!0),d.value==1?(r(),U($,{key:1,onClick:H,color:"#1989fa",type:"danger",text:"保存"})):j("",!0)]),_:1})])}}},Ce=Y(Oe,[["__scopeId","data-v-3f4ccd78"]]);export{Ce as default};
