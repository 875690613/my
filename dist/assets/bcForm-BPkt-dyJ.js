import{_ as Z,y as j,r as P,d,o as r,a as b,b as l,w as a,g as f,m as C,t as k,i as x,F as ee,h as te,c as U,s as y,z as le,A as oe,N as ie,n as ae,S as ne,k as se,B as re,C as ue,E as ce,G as de,H as pe,I as me}from"./index-BEG1S3TX.js";/* empty css              *//* empty css              */const be={class:"container"},ve={class:"content"},ge={key:0,style:{background:"#fff"}},fe={class:"result"},ye={key:0},Se={key:1,class:"error"},_e={key:1},Ve={key:0,class:"empty"},Oe={key:2},xe={__name:"bcForm",setup(Le){const e=j({initial:{shares:0,price:0,name:"",code:""},positionsList:[],currentPrice:0,localStorageObj:{positionsList:[]}}),v=j([]),n=j({quantity:3e3,price:1.81,currentPrice:0}),u=j({shares:0,price:0,currentPrice:0}),$=()=>{e.initial={shares:0,price:0,name:"",code:""},e.positionsList=[],e.currentPrice=0},p=P(2),A=[{text:"信用分产值计算器",value:0},{text:"股票补仓计算器",value:1},{text:"DCP计算器",value:2}];P([]);const L=P(0),S=P(30),_=()=>{if(n.quantity>0&&n.price>0){const i=n.quantity*.75;console.log("↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ "),console.log("1、划到流动池需扣除25%手续费，获得信用分：",i);const t=(i*n.price*.95).toFixed(4);console.log("2、流动池中信用分数量*市场价后打95折后，5%进入流动池：",t);const c=(t*.95).toFixed(4);console.log("3、兑成成dcp打95折：",c);const m=c*.95;n.currentPrice=m.toFixed(4),console.log("4、dcp兑成后，卖给服务商收取5%服务费，服务商打95折：",m),console.log("↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ "),y(`DCP变现为：${m.toFixed(4)}`)}else y("请填写完整信息")},N=d(()=>S.value===0?"除数不能为零":(L.value/S.value).toFixed(2));localStorage.getItem("localStorageObj")&&(e.localStorageObj=JSON.parse(localStorage.getItem("localStorageObj")),e.localStorageObj.positionsList.length>0&&(e.positionsList=e.localStorageObj.positionsList),e.initial.shares=e.localStorageObj.shares,e.initial.price=e.localStorageObj.price,e.initial.name=e.localStorageObj.name,e.initial.code=e.localStorageObj.code,e.currentPrice=e.localStorageObj.currentPrice);const q=d(()=>u.shares>0&&u.price>0&&e.currentPrice>0&&e.initial.code!=""&&e.initial.name!=""),h=d(()=>e.positionsList.reduce((i,t)=>i+t.shares,e.initial.shares)),E=d(()=>{const i=e.initial.shares*e.initial.price,t=e.positionsList.reduce((c,m)=>c+m.shares*m.price,0);return i+t}),V=d(()=>h.value>0?E.value/h.value:0),J=d(()=>e.currentPrice<=0||V.value<=e.currentPrice?"0.00":((V.value-e.currentPrice)/e.currentPrice*100).toFixed(2)),z=d(()=>e.currentPrice===0?"请输入当前价格查看结果":e.currentPrice>V.value?"💰 当前处于盈利状态":e.currentPrice<V.value?"📉 当前处于亏损状态":"⚖️ 当前处于保本状态"),w=d(()=>({color:e.currentPrice<V.value?"#07c160":"#ee0a24"})),G=d(()=>({fontWeight:"bold",color:w.value.color})),T=()=>{if(!q.value){y("请输入必填项数据");return}e.positionsList.push({shares:Number(u.shares),price:Number(u.price),name:e.initial.name,code:e.initial.code}),u.shares=0,u.price=0,y("添加成功")},H=()=>{if(e.positionsList.length==0){y("请先添加补仓记录");return}if(console.log("state.localStorageObj11111:",e.localStorageObj,"positionsList:",e.positionsList),e.localStorageObj.positionsList.length>0&&e.localStorageObj.positionsList[0].name==e.initial.name?(e.localStorageObj.positionsList=[...e.localStorageObj.positionsList,...e.positionsList],console.log("state.localStorageObj.positionsList",e.localStorageObj.positionsList)):e.localStorageObj.positionsList=e.positionsList,e.localStorageObj.shares=e.initial.shares,e.localStorageObj.price=e.initial.price,e.localStorageObj.name=e.initial.name,e.localStorageObj.code=e.initial.code,e.localStorageObj.currentPrice=e.currentPrice,e.localStorageObj.positionsList=[...new Map(e.localStorageObj.positionsList.map(i=>[JSON.stringify(i),i])).values()],localStorage.setItem("localStorageObj",JSON.stringify(e.localStorageObj)),v.length>0)for(let i=0;i<v.length;i++)v[i].name===e.initial.name?v[i]=e.localStorageObj:v.push(e.localStorageObj);else v.push(e.localStorageObj);localStorage.setItem("localStorageCcList",JSON.stringify(v))},W=i=>{e.positionsList.splice(i,1),y("删除成功"),e.localStorageObj.positionsList=e.positionsList},K=()=>{var i="m208887";let t=c=>{c.preventDefault(),c.clipboardData.setData("text/plain",i),y("微信号复制成功,赶紧去添加吧"),document.removeEventListener("copy",t)};document.addEventListener("copy",t),document.execCommand("Copy")},Q=()=>{history.back()};return(i,t)=>{const c=le,m=oe,R=ie,s=ae,B=ne,g=se,F=re,O=ue,I=ce,X=de,D=me,Y=pe;return r(),b("div",be,[l(R,{title:"计算器",fixed:"","left-arrow":"","left-text":"返回",onClickLeft:Q,border:!0},{right:a(()=>[l(m,null,{default:a(()=>[l(c,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),options:A,onChange:t[1]||(t[1]=o=>p.value=o)},null,8,["modelValue"])]),_:1})]),_:1}),f("div",ve,[p.value===0?(r(),b("div",ge,[l(g,{inset:"",class:"section"},{default:a(()=>[l(s,{modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=o=>L.value=o),modelModifiers:{number:!0},label:"会员卡面额",type:"number",placeholder:"请输入会员卡面额",clearable:""},null,8,["modelValue"]),t[14]||(t[14]=C(" 产出周期(天)：")),l(B,{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=o=>S.value=o)},null,8,["modelValue"])]),_:1}),f("div",fe,[S.value!==0?(r(),b("h3",ye," 每天产出："+k(L.value)+" ÷ "+k(S.value)+" = "+k(N.value),1)):(r(),b("h3",Se,k(N.value),1))])])):x("",!0),p.value===1?(r(),b("div",_e,[l(g,{inset:"",class:"section"},{default:a(()=>[t[15]||(t[15]=f("div",{class:"section-title"},"持仓信息",-1)),l(s,{modelValue:e.initial.name,"onUpdate:modelValue":t[4]||(t[4]=o=>e.initial.name=o),modelModifiers:{number:!0},required:"",label:"持仓名称",type:"text",placeholder:"请输入名称",clearable:""},null,8,["modelValue"]),l(s,{modelValue:e.initial.code,"onUpdate:modelValue":t[5]||(t[5]=o=>e.initial.code=o),required:"",label:"持仓代码",type:"text",placeholder:"请输入代码",clearable:""},null,8,["modelValue"])]),_:1}),l(g,{inset:"",class:"section"},{default:a(()=>[t[16]||(t[16]=f("div",{class:"section-title"},"初始持仓",-1)),l(s,{modelValue:e.initial.shares,"onUpdate:modelValue":t[6]||(t[6]=o=>e.initial.shares=o),modelModifiers:{number:!0},label:"持仓数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:""},null,8,["modelValue"]),l(s,{modelValue:e.initial.price,"onUpdate:modelValue":t[7]||(t[7]=o=>e.initial.price=o),modelModifiers:{number:!0},label:"成本价",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"])]),_:1}),l(g,{inset:"",class:"section"},{default:a(()=>[t[18]||(t[18]=f("div",{class:"section-title"},"补仓操作",-1)),l(s,{modelValue:u.shares,"onUpdate:modelValue":t[8]||(t[8]=o=>u.shares=o),modelModifiers:{number:!0},required:"",label:"补仓数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:""},null,8,["modelValue"]),l(s,{modelValue:u.price,"onUpdate:modelValue":t[9]||(t[9]=o=>u.price=o),modelModifiers:{number:!0},required:"",label:"补仓价格",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"]),l(F,{block:"",type:"primary",onClick:T,disabled:!q.value,class:"add-btn"},{default:a(()=>t[17]||(t[17]=[C(" + 添加 ")])),_:1},8,["disabled"])]),_:1}),l(g,{inset:"",class:"section"},{default:a(()=>[t[19]||(t[19]=f("div",{class:"section-title"},"添加记录",-1)),e.positionsList.length===0?(r(),b("div",Ve,"暂无补仓记录")):(r(!0),b(ee,{key:1},te(e.positionsList,(o,M)=>(r(),U(O,{key:M,title:`【${M+1}】 - ${o.shares}股 @ ${o.price}元`,value:`总投入：${(o.shares*o.price).toFixed(2)}元`},{"right-icon":a(()=>[l(F,{size:"small",icon:"delete",onClick:je=>W(M),style:{"margin-left":"8px"}},null,8,["onClick"])]),_:2},1032,["title","value"]))),128))]),_:1}),l(g,{inset:"",class:"section result-section"},{default:a(()=>[l(s,{modelValue:e.currentPrice,"onUpdate:modelValue":t[10]||(t[10]=o=>e.currentPrice=o),modelModifiers:{number:!0},required:"",label:"当前价格",type:"number",placeholder:"请输入当前价",suffix:"元",clearable:""},null,8,["modelValue"]),l(I,null,{default:a(()=>t[20]||(t[20]=[C("计算结果")])),_:1}),l(O,{title:"总持仓量",value:`${h.value.toFixed(2)} 股`},null,8,["value"]),l(O,{title:"平均成本价","title-style":"red",value:`${V.value.toFixed(2)} 元`},null,8,["value"]),l(O,{title:"需上涨",value:`${J.value}%`,"value-class":w.value},null,8,["value","value-class"]),l(I),l(O,{title:z.value,"title-style":G.value,style:{"margin-bottom":"40px"}},null,8,["title","title-style"])]),_:1})])):x("",!0),p.value===2?(r(),b("div",Oe,[l(g,{inset:"",class:"section"},{default:a(()=>[t[21]||(t[21]=f("div",{class:"section-title"},"DCP计算",-1)),l(s,{modelValue:n.quantity,"onUpdate:modelValue":t[11]||(t[11]=o=>n.quantity=o),modelModifiers:{number:!0},label:"信用分数量",type:"number",placeholder:"请输入数量",suffix:"股",clearable:"",onInput:_},null,8,["modelValue"]),l(s,{name:"stepper",label:"市场价"},{input:a(()=>[l(B,{modelValue:n.price,"onUpdate:modelValue":t[12]||(t[12]=o=>n.price=o),step:"0.01","decimal-length":2,label:"市场价",type:"number",placeholder:"请输入价格",suffix:"元",clearable:""},null,8,["modelValue"])]),_:1}),l(s,{modelValue:n.currentPrice,"onUpdate:modelValue":t[13]||(t[13]=o=>n.currentPrice=o),modelModifiers:{number:!0},label:"总价",type:"number",placeholder:"请输入当前价",suffix:"元",clearable:"",onChange:_,onInput:_,onPlus:_,onMinus:_},null,8,["modelValue"])]),_:1}),l(F,{block:"",type:"primary",onClick:_,class:"add-btn"},{default:a(()=>t[22]||(t[22]=[C("计算")])),_:1})])):x("",!0)]),l(Y,{class:"action-bar"},{default:a(()=>[l(X,{icon:"chat-o",text:"客服",onClick:K}),p.value==1?(r(),U(D,{key:0,onClick:$,color:"#1989faad",type:"warning",text:"重置"})):x("",!0),p.value==1?(r(),U(D,{key:1,onClick:H,color:"#1989fa",type:"danger",text:"保存"})):x("",!0)]),_:1})])}}},he=Z(xe,[["__scopeId","data-v-5a269443"]]);export{he as default};
